<script src="https://integrations.missiveapp.com/missive.js"></script>
<link href="https://integrations.missiveapp.com/missive.css" rel="stylesheet">

<h1>Version 1</h1>

<p id="demo"></p>

<script>
    Missive.on('change:conversations', (ids) => {
        Missive.fetchConversations(ids).then((conversations) => {
            if (conversations.length != 1) {
                // Do nothing if multiple conversations are selected.
                return
            }

            var message = conversations[0].latest_message
            if (!message || !message.from_field) {
                // Do nothing if conversation has no message (only chat comments) or if
                // message has no From field.
                return
            }

            var from = message.from_field
            console.log('Message from:', from.name, from.address)
            console.log('Message subject:', message.subject)
            document.getElementById("demo").innerHTML = from.ids;
            
        })
    })
</script>